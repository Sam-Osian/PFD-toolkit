{% extends "workbench/base.html" %}

{% block sidebar %}
    {% include "workbench/_sidebar.html" %}
{% endblock %}

{% block content %}
<div class="workbench explore-workbench os-workbench workflow-clean workflow-clean--filter">
    {% include "workbench/_workspace_hud.html" %}

    <section class="explore-surface workflow-clean-shell reveal-up">
        <div class="workflow-clean-head">
            <span class="section-kicker">Filter</span>
            <h3>Filter reports</h3>
            <p>Define a query and keep only the records that match your research focus.</p>
        </div>

        <form method="post" class="workflow-clean-form">
            {% csrf_token %}
            <input type="hidden" name="action" value="filter_reports">

            <div class="workflow-clean-field">
                <label for="search_query">What should be treated as relevant?</label>
                <textarea id="search_query" name="search_query" class="workflow-clean-prompt" placeholder="e.g. Reports where delayed emergency response, poor inter-agency handoffs, or missed escalation may have contributed to death."></textarea>
            </div>

            <details class="expander workflow-clean-expander">
                <summary>Advanced options</summary>
                <div class="expander-content">
                    <div class="workflow-clean-options">
                        <label class="checkbox"><input type="checkbox" name="filter_df" checked> <span>Keep only matching reports</span></label>
                        <label class="checkbox"><input type="checkbox" name="produce_spans"> <span>Include supporting quotes</span></label>
                        <label class="checkbox"><input type="checkbox" name="drop_spans"> <span>Remove quote columns after screening</span></label>
                    </div>
                </div>
            </details>

            <div class="workflow-clean-actions">
                <button type="submit" class="button-primary">Run filter</button>
            </div>
        </form>
    </section>

    {% include "workbench/_workspace_dataset.html" %}
</div>

{% include "workbench/_workspace_config_modal.html" %}
{% endblock %}
